<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Create a Trip</title>
    <!-- Flowbite & Tailwind -->
    <link href="https://cdn.jsdelivr.net/npm/flowbite@4.0.1/dist/flowbite.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  </head>
  <body class="min-h-screen bg-white text-gray-900">
    <main class="max-w-2xl mx-auto px-6 py-12 space-y-8">
      <h1 class="text-3xl font-bold">Create a New Trip</h1>
      <p class="text-gray-700">Define what your friends will be able to choose when planning this trip.  Leave
        everything checked to allow full flexibility.</p>

      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <div class="space-y-2">
            {% for category, message in messages %}
              <div class="p-3 rounded border {{ 'border-red-400 bg-red-50 text-red-800' if category=='error' else 'border-green-400 bg-green-50 text-green-800' }}">
                {{ message }}
              </div>
            {% endfor %}
          </div>
        {% endif %}
      {% endwith %}

      <form method="post" class="space-y-8">
        <!-- Trip title and creator names -->
        <div class="space-y-4">
          <label class="block">
            <span class="text-sm font-medium">Trip Title</span>
            <input type="text" name="trip_name" required
                   class="block w-full mt-1 p-2.5 rounded border border-gray-300 focus:ring-blue-500 focus:border-blue-500" />
          </label>
          <label class="block">
            <span class="text-sm font-medium">Your Name(s) (optional)</span>
            <input type="text" name="names"
                   class="block w-full mt-1 p-2.5 rounded border border-gray-300 focus:ring-blue-500 focus:border-blue-500" />
          </label>
        </div>

        <!-- Locations -->
        <section class="space-y-4">
          <h2 class="text-xl font-semibold">Allowed Destinations</h2>
          <p class="text-sm text-gray-500">
            Enter each destination on its own line in the format <code>Name,Latitude,Longitude</code>.  For example:
            <code>Paris,48.8566,2.3522</code>.  You must provide at least one destination.  These will be the options your friends can pick from when planning the trip.
          </p>
          <textarea name="destinations" rows="5" placeholder="City,lat,lon&#10;Another City,lat,lon" class="w-full p-2.5 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500"></textarea>
        </section>

        <!-- Durations -->
        <section class="space-y-4">
          <h2 class="text-xl font-semibold">Allowed Durations</h2>
          <p class="text-sm text-gray-500">Select one or more durations your friends can pick.</p>
          <div class="grid grid-cols-3 gap-4">
            {% for duration in durations %}
            <label class="cursor-pointer">
              <input type="checkbox" name="durations" value="{{ duration }}" class="hidden peer" checked>
              <div class="aspect-square border border-gray-300 rounded-lg flex items-center justify-center
                          transition peer-checked:border-blue-500 peer-checked:bg-blue-100 hover:border-gray-900">
                {{ duration }}
              </div>
            </label>
            {% endfor %}
          </div>
        </section>

        <!-- Seasons -->
        <section class="space-y-4">
          <h2 class="text-xl font-semibold">Allowed Seasons</h2>
          <p class="text-sm text-gray-500">Select one or more seasons your friends can choose.  These control which
            dates will be selectable.</p>
          <div class="grid grid-cols-4 gap-4">
            {% for season in seasons %}
            <label class="cursor-pointer">
              <input type="checkbox" name="seasons" value="{{ season.name }}" class="hidden peer" checked>
              <div class="border border-gray-300 rounded-lg p-3 flex flex-col items-center gap-2
                         transition hover:border-gray-900
                         peer-checked:border-blue-500 peer-checked:bg-blue-100">
                <img src="{{ url_for('static', filename=season.image) }}" alt="{{ season.name }}" class="w-16 h-16 object-contain" />
                <span class="text-sm font-medium">{{ season.name }}</span>
              </div>
            </label>
            {% endfor %}
          </div>
        </section>

        <button type="submit" class="w-full px-4 py-2 font-medium text-white bg-blue-600 rounded hover:bg-blue-700">
          Create Trip
        </button>
      </form>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/flowbite@4.0.1/dist/flowbite.min.js"></script>
  </body>
</html>